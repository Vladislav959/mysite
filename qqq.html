<!DOCTYPE html>
<html lang="en">
<head>
 
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js'></script>
    
    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css' rel='stylesheet' />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin:0;
        }
        .mapboxgl-ctrl-attrib-button{
            display:none;
        }
        *{
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div id='map' style='width: 100vw; height: 100vh;'></div>
<script>
let userLongitude, userLatitude;
function getCoords(position) {
    userLatitude  = position.coords.latitude;
    userLongitude = position.coords.longitude;
}
new Promise((resolve,reject)=>{
    if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(getCoords);
  }
  setTimeout(()=>{resolve(1)},500);
}).then(result => {
    mapboxgl.accessToken = 'pk.eyJ1IjoidmxhZG9zcyIsImEiOiJja2lwbGk2dG0wNTcyMzFueWk2a2w5Y3pmIn0.TUY7Uh57rkJWDux_HdtaVQ';
var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/vladoss/ckipmxp6r44xt17m3gbp2vk6n',
center: [userLongitude,userLatitude],
zoom:18
});
map.on('load', function() {
     var el = document.createElement('div');
el.className = 'marker';
el.style.position = 'relative';
el.style.width = '55px';
el.style.height = '55px';
el.style.borderRadius = '100px';
el.style.background = 'black';
let positionIcon = new mapboxgl.Marker(el);
 positionIcon.setLngLat([userLongitude,userLatitude])
 positionIcon.addTo(map);
 var center = turf.point([userLongitude, userLatitude]);
    var radius = 25;
    var options = {
      steps: 80,
      units: 'meters'
    };

    var circle = turf.circle(center, radius, options);

    map.addLayer({
        "id": "circle-fill",
        "type": "fill",
        "source": {
            "type": "geojson",
            "data": circle
        },
        "paint": {
            "fill-color": "pink",
            "fill-opacity": 0.5
        }
    });
    /*navigator.geolocation.watchPosition(updateLocation);
    function updateLocation(position){
        let {latitude,longitude} = position.coords;
        positionIcon.setLngLat([longitude,latitude]);
        positionIcon.addTo(map);
        map.flyTo({
center: [longitude,latitude]
});
    }*/
})
})


 
    
</script>
    
</body>
</html>
